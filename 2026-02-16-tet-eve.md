---
layout: post
title: Developer Diary, Lunar New Year's Eve
date: 2026-02-16 07:41:05-0500
categories:
tags: [programming, project, dev-journal]
labels: [blog, mini-server]
summary: Progress on assorted projects
thumbnail: /blog/assets/chuot-ruoc-den.png
description: This week's projects include my media server, more labeling of blog posts, and fixing some of the blog's code.
spell: Chuột rước đèn Đông Hồ Tsagaan Sar Oshōgatsu Sjoogwaci Seollal Tết Nguyên Đán Navigium Isidis Pinebook Vbt Ollama Syrewicze Avahi YaCy Roku Websockets audiobookshelf Pratham
proofed: true
---

* Ignore for ToC
{:toc}

Tomorrow, many East Asian cultures, and those cultures influenced by them, celebrate their [Lunar New Year](https://en.wikipedia.org/wiki/Lunar_New_Year)---as distinct from the starts of the years in other Lunar calendars---in the forms of the Spring Festival, Tsagaan Sar, Oshōgatsu, Sjoogwaci, Seollal, Tết Nguyên Đán, and others.  In the United States, we generally ignore the "eve" and simplify the cultural aspects to "Chinese New Year," ignoring that the festival runs for two weeks until the Lantern Festival.

![A dragon-dance performed by anthropomorphic rats](/blog/assets/chuot-ruoc-den.png "And you made fun of people dressing their pets up in Santa Claus hats...")

Because we can't rightly overlook the boisterous festivities in places like Rio and New Orleans, [Carnival](https://en.wikipedia.org/wiki/Carnival) started yesterday and continues through tomorrow, the big period of indulgence for mostly-Catholics before heading into Lent.  As with many Catholic holidays, it may have its roots in the [Navigium Isidis](https://en.wikipedia.org/wiki/Navigium_Isidis) festival.

And on to the week's projects.

## Mini-Server, Part 21

This rambles a bit, because it accidentally connects a lot of my little side-projects.

I haven't found a usable power adapter for the Pinebook, so I focused some attention on the older mini-PC that I mentioned at the [end of January]({% post_url 2026-01-26-duarte %}).  Plugging it in, I got a brief reaction from the fan, validating that it had power, and then...nothing.  Presumably, I replaced it at this point a few years back, either so short-sighted that I didn't care about forgetting a computer in a cabinet, or so unaware of my own habits that I assumed that I'd get back to it soon to figure out what went wrong.

### Harvest Time

This time, because I now have fewer qualms about stripping machines for parts if I can reuse them, I opened up the case that nobody really designed to open.  I couldn't find the RAM to see if I might use it to upgrade the laptop that I use regularly, but I immediately spotted the SSD hard drive, which might---given that everything gets recorded there---at least provide some clues about what happened.  I pulled it out and dropped it into the external adapter that I picked up to recover from the laptop crash.

Oh, I actually didn't notice that first.  I *actually* first noticed the plastic button, the little "shim" that connects the finger outside the case to the tiny button on the motherboard, didn't have any springiness to it, probably explaining why it wouldn't start.

### Conspiracy String

Anyway, the drive had Windows 10 on it and Emby installed, and the newest files that I could find came from mid-2022.  I couldn't find anything else interesting on it, so I probably didn't use it as a computer.  Grabbing my attention, though, by 2022, I had sent out the [blog's newsletter](https://buymeacoffee.com/jcolag) for a year and keeping a nightly journal---I talked about that habit in my [things that worked for me]({% post_url 2022-11-27-worked %}) near the end of 2022 and published the [script that generates each night's file](https://codeberg.org/jcolag/periodic-scripts/src/branch/main/diary.sh), if anybody wants more information on that---so maybe I mentioned something there.  I talked about the process of *setting up* a media server in the early installments of the newsletter, after all, and "my media server died so now I can't go back to watching **Benson** until I replace it" seems like something that I'd note to myself.

Weirdly, I found *hints*, like many nightly entries where I compared prices on a potential replacement server, and then mentions of when I set up the newer mini-PC, but no "the server threw a bunch of errors and belched out a puff of smoke"-types of talk.  In fact, it never comes up at all, other than one lousy mention of "still" not getting it to boot, to my surprise.

By the way, did I mention that I found this mini-PC---but not its adapter---in the box of the *other* mini-PC?  Way to reduce the chances of my finding it, John-of-the-past...

### Take Two

Regardless, opening the case showed me that I could wipe the drive without losing anything *and* that the problems might have stemmed from a broken power switch.  I plugged everything back in again, minus the case, and got a Windows login screen with a comment that something had changed in authentication that would prevent me (identified by my e-mail address) from logging in.

That sounds bad, but since I had already proved that I don't care about anything on the drive, and don't want to stick with Windows, it works for me.  I grabbed the Debian installation, and got to work.

Debian installed fine as always.  The desktop environment occasionally stalls when loading something, but since I don't expect to *use* it as a desktop machine often, that shouldn't cause problems.  Anyway, it tells me that it has a four-core processor from late 2016 with 6 GB of RAM, hardly the oldest device that I have to work with; it looks like I bought it in early 2020, shortly after the blog launched, though probably not for related reasons.

### Testing

The other mini-PC trapped me this way, though, you might remember.  I installed Debian and, flush with success, started trying to use it, only to have it crash under any kind of strain, such as streaming a video.  I verified that this happened by trying to build [Graphite](https://graphite.art/) and seeing *that* crash it, too.

Here, the build failed, but the machine survived.  Guessing that might suffice, and not interested in debugging their build[^Vbt-Wp], I downloaded the pre-built version of Graphite, and set up a quick web server, and...nothing.  The computer vanished from the network, and wouldn't respond to the keyboard, either.

[^Vbt-Wp]:  If it provides useful insight to anybody, it bombed with an error of "failed to run custom build command for `raster-nodes-shaders v0.1.0 (/home/john/Graphite/node-graph/nodes/raster/shaders)`."

Pulling the plug and restarting it, I couldn't find any evidence of a crash, and realized that it probably detected an idle state and went into hibernation mode, locking out the Bluetooth keyboard.  Graphite does work.  [Jellyfin](https://jellyfin.org/) installs and runs, though without the media drives.  And as a second attempt to stress the machine, I installed [Ollama](https://ollama.com/) temporarily, and let it briefly run a model bigger than my "spare laptop" can handle.

### Waiting Game

I found it tough to believe that I, even at my laziest, abandoned a working computer for a similar mini-PC because of nothing more than a broken power switch, so I still didn't trust that it'll actually work.  Therefore, I left it running in the corner, occasionally logging in for a brief stress test, figuring that at least increases the chance of finding out that this machine won't handle what I need.  For more consistent testing, a quick search turned up Andy Syrewicze's post [How to Stress Test a Linux System](https://www.andyontech.com/posts/how_to_stress_test_linux/).  The post has some minor but unfortunate editing problems, such as replacing the double-hyphens used in command-line arguments to en-dashes, but testing CPU and memory seems like it gets me where I want to go.

Notably, I don't care about the actual performance, as long as the system keeps slogging on.  I needed a couple of days of this to finally trust that the machine wouldn't fall apart at exactly the times that I needed it.  Eventually, I even ran the CPU test for an hour, and it came through.

I had *one* glitch at the end of my experiment.  After the Internet went out for a while, the machine got back onto the internal network, but wouldn't respond by name to `ssh` or web requests.  That'll probably cause problems, but moving it with the rest of the servers connects it to the television, meaning that I can plug in a keyboard and check on it, rebooting as needed without needing to hope that the power switch works.

I set up Jellyfin, and so far, so good.  It at least works better than the Raspberry Pi did for a media server, but I haven't given it too big a workout.

### Back to Graphite

Do you remember all the agonizing that I did over getting a build of Graphite for the Raspberry Pi, and then trying to build it here?  Yeah, I didn't need to care.

While they wrote Graphite mostly in Rust, which has a native compiler, and (until recently) only released its pre-built versions for AMD64, it actually compiles to [Web Assembly](https://en.wikipedia.org/wiki/WebAssembly), so the "use Python's web server" (or any ad hoc web server) would work fine on any machine, since everything actually runs in the browser.  However, it *didn't* work on my servers, because---like too many Single-Page Applications---they built it assuming that it sits at the root, and so the page can't find the JavaScript code at, for example, `http://server.local/graphite`.

The solution always feels ugly, but I do know how to work around this:  Use [Avahi Aliases](https://github.com/scott-ainsworth/avahi-aliases) to give the computer a second name like `graphite.local`, and then configure NGINX as if Graphite had its own server.

I also moved the YaCy server over there, since that also needs more legroom than a Raspberry Pi can usually afford.

### Audiobooks

Oh, and Jellyfin had some trouble with my small audiobook collection---somehow unable to display the books, instead churning for far longer than it takes for the hundreds of television shows or films---so I decided to give [Audio Bookshelf](https://www.audiobookshelf.org/) a try.  I don't dislike it, though it means that I can't listen to the books on television, since they don't have a Roku app, not that I do that sort of thing often.

I should note that I had one inconvenience in setting it up:  Outdated or possibly incorrect documentation.  In the repository, under [Reverse Proxy Set Up](https://github.com/advplyr/audiobookshelf#reverse-proxy-set-up), it says that, to serve the application from a subfolder, you need to flip the Websockets toggle.  I challenge readers to find that interface.

It looks like you no longer need it, though.  My server redirects `/audiobookshelf` to port 13378 without needing to do any more work.

It looks like this might work reasonably well for podcasts, too, though it can't import an OPML file, or export one if I decide that it won't work for me.  As such, I probably won't give it a try any time soon.

## Social Media

This probably doesn't really qualify as social media per se, but somebody pointed out that my [main page](/) on this website gets awfully wordy, if somebody actually wanted to get in touch with me or whatnot.  And while I don't really object to that, stretching out of my comfort zone for design would probably help.

As such, I took a look at [Little Link](https://littlelink.io/), and with some tweaking, came up with a [prototype link page](https://john.colagioia.net/link/), nothing but a tagline and links.  I used the `column-width` CSS rule on the list of buttons[^Xi93F2] to get the multiple columns.

[^Xi93F2]:  Not actually buttons.  Would it kill people to use HTML elements for their purpose instead of dressing everything up like everything else...?

I haven't decided whether I find it acceptable enough to link from the front page, and may take it down.  But for now, it gives a tour of where you might find me.

## Entropy Arbitrage

{% codeberg jcolag/entropy-arbitrage-posts %}

All [Free Culture Book Club](/blog/tag/book-club) posts should now have appropriate labeling on them, so if you wanted to find the films (OK, only one) released under a Creative Commons Attribution license in Swedish, they now lie only a few clicks away.  The biggest lack comes from the large collections of children's books---[Book Dash]({% post_url 2020-09-12-bookdash %}) and [Pratham Books]({% post_url 2020-11-28-pratham %}).  They both release at least some books in *many* languages, and the idea of tracking down all the possibilities, but somehow also noting that only some books come in some languages felt overwhelming and not entirely useful.

If you wanted the language distribution, though---ignoring books published in a variety of African and Indian languages---over the last almost-six years, we have managed to track down works in Farsi, French, German, Hungarian, Japanese, Portuguese, Polish, Spanish, Swedish, and Tamil, though I might have missed one or two.  I could have sworn that we checked out something from China, but I suppose not.

## Entropy Arbitrage, the Code

{% codeberg jcolag/entropy-arbitrage-code %}

The blog's plugins have cleaner code, for the most part, fixing a couple of bugs that have snuck through.  The emoji plugin now displays emoji names with underscores converted to spaces, so that I don't keep going into the list to create a readable name.  The file may still need editing occasionally to disambiguate for the characters that don't seem to have a unique name, though.

Similarly, a few of the plugins had compound conditions ("if this or that") where I picked the wrong version of the operator, causing some minor glitches.  They now have the lowest binding, to make sure that they don't interfere with other operations in the condition.

Also, the tags now should look better on index pages.  The list includes the posts' labels, and---because that can now represent an arbitrarily long list, which can look sloppy---centers them under the post link.

## Next

I don't really have a plan for the week, though I assume that I should catch up on older projects.  An idea for a new project has started brewing, but it'll require some advance research and planning, and it might become a series of posts.

Happy new year to those celebrating!

* * *

**Credits**:  The header image is [Chuột rước đèn](https://commons.wikimedia.org/wiki/File:Chu%E1%BB%99t_r%C6%B0%E1%BB%9Bc_%C4%91%C3%A8n.JPG) by an unknown Đông Hồ artist, long in the public domain due to an expired copyright.
