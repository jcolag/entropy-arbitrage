---
layout: post
title: Developer Diary, Opéra Garnier
date: 2026-01-05 06:51:05-0500
categories:
tags: [programming, project, dev-journal]
labels: [blog, ham-newsletter, mini-server, salavi, library-update]
summary: Progress on assorted projects
thumbnail: /blog/assets/Paris-Palais-Garnier-Interior-Postcard-from-1909.png
description: This week's projects include my mini-servers, the blog, SaLaVI, the Ham newsletter generator, and some library updates.
spell: Opéra salavi ntfy grep sed gedit endraw SaLaVI Shiori Fýlakas Onomáton Palais
proofed: true
---

* Ignore for ToC
{:toc}

Apparently, December burned the calendar out on holidays, so instead, I'll point out that, a hundred fifty years ago today, the [Opéra Garnier](https://en.wikipedia.org/wiki/Palais_Garnier) in Paris opened its doors, among the most famous opera houses in the world, at least partly due to it featuring in **The Phantom of the Opera**.

![A 1909 postcard depicting the main auditorium of the Garnier](/blog/assets/Paris-Palais-Garnier-Interior-Postcard-from-1909.png "Do you need to fumigate for Phantoms, or can you get by with a couple of traps baited with ambitious ingénues...?")

And on to the week's projects.

## Mini-Server, Part 19

I don't know how much use it'll get, but I had a few minutes and a possible use came to me---maybe upgrading the script that lets me type notes that come to me overnight[^acOux1]---I installed [ntfy](https://ntfy.sh/).  I haven't done anything *with* it, yet, but my overnight script currently writes everything (and a time-stamp) to a temporary file, which goes wrong if the computer crashes and, even under optimal circumstances, requires moving the text elsewhere.

[^acOux1]:  It occurs to me that I never pointed out *why* I use this script instead of any other approach to jotting ideas down.  First, it also reads out the time if I hit an arbitrary key.  Second, since I touch-type, I can get a note in without lifting my sleep-mask or opening my eyes, as long as I can get my fingers to the keyboard.

With ntfy running, at least in theory, the script could publish the information to the local server, which I could then pick up from scripts on other systems or other clients.  I can also theoretically leave myself notes to pick up on any computer or tablet in the house.

One problem so far?  I can't find a Linux desktop client that will connect to the server, so I may need to write one using their REST API.

## Entropy Arbitrage

{% codeberg jcolag/entropy-arbitrage-posts %}

As I probably promised a few times, I have finally started adding "labels" to posts to go with the existing tags.  For the week so far, I have focused on the [*Star Trek*](/blog/tag/star-trek) posts, not because I find them a high priority, but because it takes the least effort to go season-by-season.  Specifically, I can do something like this.

```bash
grep "^\[\^" _posts/*-ng-season-5.md \
  | cut -f2 -d'(' \
  | cut -f3 -d' ' \
  | grep '^2'
  | sed 's/^/_posts\//g;s/$/.md/g' \
  | xargs gedit
gedit _posts/*-ng-season-5.md
```

The season posts already do a lot of the heavy lifting, here, because my "template"---really, I only copy the last season's post and rewrite the contents---ends with the footnote references, a link to every post in the season.  For example, they look something like this, but for the entire season.

```Markdown
{% raw %}
[^CL]: [*Cost of Living*]({% post_url 2024-09-26-cost-living %})
[^PM]: [*The Perfect Mate*]({% post_url 2024-10-03-perfect-mate %})
[^IF]: [*Imaginary Friend*]({% post_url 2024-10-10-imaginary-friend %})
[^B]: [*I, Borg*]({% post_url 2024-10-17-i-borg %})
[^NP]: [*The Next Phase*]({% post_url 2024-10-24-next-phase %})
{% endraw %}
```

Therefore, if I look for every line that starts with `[^` at the start of the line, that gives me all the footnotes.  Taking everything after the open parenthesis turns that into the template to get the URL to the post, and the third space-delimited chunk of that gives me the name of the file for the post---plus some useless lines from other footnotes, which I filter out by requiring them to start with a two for the year---after I preface it with the `_posts` folder and give it a `.md` extension.  In the grand scheme, this could occasionally give me an extra file, if I happen to have included an arbitrary footnote that happens to refer to an old post, but sending that list to the editor opens them, where I can add a line like `labels: [st-tng, st-tng-s5]` to all of them plus the season summary.

At this point, I have gotten through [**The Next Generation**](/blog/tag/st-tng) [Season 7](/blog/tag/st-tng-s7), [Season 6](/blog/tag/st-tng-s6), [Season 5](/blog/tag/st-tng-s5), [Season 4](/blog/tag/st-tng-s4), [Season 3](/blog/tag/st-tng-s3), and [Season 2](/blog/tag/st-tng-s2).

## SaLaVI

{% codeberg jcolag/salavi %}

Finally, the game has stopped trying to reset and restart when somebody opens the options.  You actually need to change the board size for that to happen, as intended from the original version of the options pop-up.

## Ham Newsletter

{% codeberg jcolag/ham-newsletter %}

As you could probably already guess given how often that I've needed to vent about Mailchimp charging for the part of the service that I use, I have removed the calls to Mailchimp in the main script, so that I don't find myself trying to debug API failures that I don't care about.

Changes didn't stop there, though.  The main script now checks the newsletter "source" for a (configurable) string.  If it finds that term in the text, then it stops with a notice.  Why?  One of the library services inserts the name of the library into the URL.  While it probably wouldn't take much effort to semi-accurately guess what library I call mine, I scrub that information because I can't imagine anybody finding it useful...but I also sometimes forget, so this serves as a reminder.

Finally, the script uses the code to get bookmarks from a Shiori installation, rather than trying to dig it out of Firefox.

## Library Updates

I needed to bump library versions for [**Fýlakas Onomáton**](https://codeberg.org/jcolag/fylakas-onomaton)

## Next

I would expect changes for the foreseeable future, to go to adding labels to older posts.  As mentioned, I started with the *Star Trek* posts because I can automate part of the process per season of the show.  However, the [Free Culture Book Club](/blog/tag/book-club) and [developer diary](/blog/tag/dev-journal) posts---to say nothing of the Sunday posts---will require actually checking each post to find the prominent aspects of the post, so they'll take longer.

* * *

**Credits**:  The header image is [Palais Garnier. Interior Postcard from 1909](https://commons.wikimedia.org/wiki/File:Paris._Palais_Garnier._Interior._Postcard_from_1909.jpg) from Lucien Levy & Sons, long in the public domain due to expired copyright.
