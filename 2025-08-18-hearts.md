---
layout: post
title: Developer Diary, Hartjesdag
date: 2025-08-18 08:45:05-0400
categories:
tags: [programming, project, dev-journal]
summary: Progress on assorted projects
thumbnail: /blog/assets/Hartjesdag.png
offset: -30%
description: This week's projects include the mini-servers, Codidact questions, food, Ham Newsletter, the Notoboto note-taking application, and the blog's code.
spell: stenotype Typey Codidact Notoboto Hartjesdag Warmoestraat Infocom janky Frotz Zork Clavell Shōgun Megaboz Fooblitzky gPodder CSON Braakensiek
proofed: true
---

* Ignore for ToC
{:toc}

Today, the Dutch once celebrated---with some occasionally looking to bring it back---[Hartjesdag](https://en.wikipedia.org/wiki/Hartjesdag), the Day of Hearts.  Over time, it may have transformed from a harvest/hunting event (as in the homonym *hart*, for a male deer), to some summer version of Halloween with children collecting money around bonfires, to a cross-dressing carnival.  And we all thought that *Easter* had confusing iconography.

![Painting of people on the street Warmoestraat in Amsterdam, 1926](/blog/assets/Hartjesdag.png "The specific faces really make this...")

With that, on to the week's projects.

## Mini-Server, Part 7

If you have known me for a long time, then you may know that have always loved [Infocom](https://en.wikipedia.org/wiki/Infocom)'s *interactive fiction* (text adventure games), and you might know that I spent a few years acquiring original packages for the company's entire run, along with some later anthologies released by Activision after they bought the company, grabbing the game files along the way.  As a result, for probably over twenty-five years, the collection of games tends to get copied onto every (private) computer that I move onto before much else happens, even if I don't seem likely to play them.

This makes more sense than it sounds like it might, because Infocom developed a virtual machine to play their games on some of the smallest computers available in the 1980s.  After Infocom folded, people got to work reverse-engineering the Z-Machine, plus an extraordinary array of developer tools to create new games for the same portable platform, such as [Inform](https://ganelson.github.io/inform-website/), which I have mentioned on the blog from time to time, and still want to give another shot to its modern version, at some point.

Anyway, during the week, I thought to myself that surely, after all these years, the state of the art for playing these games as a web page must have advanced past...some janky Java applet that somebody released around the turn of the century.  It worked well enough that the BBC dressed it up nicely to celebrate some anniversary or other for **The Hitchhiker's Guide to the Galaxy**, so I don't mean to suggest that anybody should avoid it, but Java never worked as well in browsers as it did for web services, and a Java applet will definitely tax my computer much more than if I ran [Frotz](https://davidgriffith.gitlab.io/frotz/) locally, for example.

Searching around for a better solution, I found [Parchment](https://iplayif.com/), a single HTML file---stylesheet and JavaScript included---that emulates the Z-Machine and a few similar systems that have cropped up over the years.  It doesn't provide any facility to list the available games or pick one, except on the client computer, but a person could create a quick HTML index with links using the `story` variable, such as this.

```HTML
<li>
  <a href="parchment.html?story=path/to/game.dat">
    The Game's Title
  </a>
</li>
```

And...it didn't work.  Or, rather, a tiny subset of the games worked, especially the demonstrations and promotional games later released as freeware[^3], but I couldn't get a single official release to work.  Looking carefully at the difference, irritating as it sounds, it comes down to the *file name*.  The official releases had names such as `game.dat` as in my example code or `game.zip`, referring to "Zork Interpreter Program," not the later compression format.  Parchment decides what emulator to use based on the file extension, so I needed to go through all the subfolders, run `file *` to get the Z-Machine version---this has gone on long enough that Linux systems all automatically recognize the files---and rename them to have one of `.z3`, `.z4`, `.z5`, or `.z6` as an extension, the number matching the Z-Machine version, mostly mapping to the game size, with a couple of exceptions.

[^3]:  For the curious, the two "Sampler" games that each included a section from four different games, a similar teaser **Mini-Zork**, promotional game for one of the later Activision releases **Zork:  The Undiscovered Underground**, and two of the unfinished demonstrations that somebody at Activision released to the public, all worked without any complaints, as I had them stored on the drive.

And speaking of exceptions, the final official Z-Machine version supported static graphics, a huge step for a company that insisted for many years that they stuck their "graphics where the Sun don't shine."  Parchment doesn't (yet?) support those games at all, ruling out playing the last four releases[^4], plus two early-stage prototypes that Activision later made available.  In addition, while not every implementation of the Z-Machine supported (or currently supports) it, two games[^5] had releases with sound effects.  Those two games play, but I don't know if Parchment has any interest in dealing with audio files in whatever weird format Infocom used that even [Audacity](https://www.audacityteam.org/) can't work out.

[^4]:  Specifically, **Arthur:  The Quest for Excalibur**, **Journey**, **James Clavell's Shōgun**, and **Zork Zero:  The Revenge of Megaboz**.

[^5]:  Specifically, **The Lurking Horror** and **Sherlock:  The Riddle of the Crown Jewels**.

I can live with using a desktop Z-Machine emulator for four games, six for the "full experience," especially since I so infrequently remember to play any of them.  Oh, and still no progress on anybody getting [**Fooblitzky**](https://en.wikipedia.org/wiki/Fooblitzky) running without the original native interpreters that shipped in 1985, as far as I can tell...

### Podcast Misfire

Significantly less successful, having reached the end of my podcast backlog for the first time that I can remember, it seemed worth trying to find a self-hosted podcast client that would fit (what seem to me like) minimal requirements, such as...I don't know, maybe the following.

- Runs on a Raspberry Pi, a low-powered device with an ARM-based processor.
- Imports and exports OPML files, so that I don't need to manually re-subscribe to anything, and won't feel "locked in" on the new setup.
- Has a user interface, where I can *play* the podcasts, and do the usual management work.
- Doesn't require a full database management system, because why would a collection of podcasts ever need that much complexity?
- Doesn't require Docker, because space and CPU cycles get tight, so "lighter than a virtual machine" doesn't cut it, if I can run the server directly.
- Ditto for anything that now requires the pain of Python virtual environments, because nobody could bother to prevent the ecosystem from descending into their own version of [DLL Hell](https://en.wikipedia.org/wiki/DLL_hell) while they smugly made fun of it happening elsewhere.
- Bonus?  If I get cut off---say, because either the client or server crashed---I'd love if it could remember where I left off.

While I don't mind [gPodder](https://gpodder.github.io/) at all, it feels like one of the few remaining desktop applications that I need for what they do, but in theory doesn't need to run directly in front of me when I have two servers available to distribute the load.

And yet, I couldn't find a single application that does this "out of the box."  [Audio bookshelf](https://www.audiobookshelf.org/) claims to have everything, but...not together?  It will apparently run on a Raspberry Pi (or any ARM system) in Docker, but they only build it without Docker for Intel-based systems.  [Escape pod](https://github.com/rphillips/escapepod) provides ARM builds and support SQLite (avoiding the need for PostgreSQL or similar on the machine), but they don't build it *with* SQLite support.  [Pod grab](https://github.com/akhilrex/podgrab) doesn't even provide releases, because they want everybody to use Docker.  And some don't have user interfaces, one even boasting that after you set everything up, you can connect a podcast client to it for listening, apparently not realizing that it works the same way without their software.  Some need you to manually put the podcast episodes into place, somehow not understanding how podcasts work.  And a surprising number of them have OPML support "on the roadmap," because they primarily do audiobooks, and you *may* use them for podcasts, too.

And sure, in a few of those cases, I could have tried setting up a build environment---usually Go---and *maybe* gotten what I wanted, after working through their build process.  But even assuming that this old Raspberry Pi has the power to get through a full build, after wasting all this time chasing leads down dead ends, if I then need to debug which packages even exist for ARM, and all that nonsense, then I might as well *write* something from scratch that actually checks all the boxes that I want, because a podcast client doesn't have so many moving parts.

I probably won't do it, but I could probably pull something like that together fairly quickly, and that'll stop me from messing around with other setups for undetermined lengths of time.

## Codidact

I almost forgot, speaking of the servers, that I posted [2FAuth Self-Hosted, Unable to Register](https://powerusers.codidact.com/posts/294451), hoping for help on setting up [2FAuth](https://2fauth.app/) as a backup to [GNOME Authenticator](https://apps.gnome.org/Authenticator/).

The question seems too far out of the 2FAuth team's interests---and possibly expertise, given their bizarre NGINX examples---so it doesn't seem useful to file an issue.  As such, if anybody has insight on how to make this work, I could definitely use the help.

Also, one of the developers has started looking at building an API for the site, so I [dropped in my minimal recommendations](https://meta.codidact.com/posts/289322/294502#answer-294502), including a description of how such an API could help dress up these sections of the Monday posts.

Since this post carries a *lot* of links, I might as well mention that another answer to the API question mentions [Approach Zero](https://approach0.xyz/search/), a "math-aware search engine," which I imagine more than a couple of readers might find interesting and/or useful.

## Non-Nut Butters

I actually messed around in the kitchen[^1], a bit, and can report back on two small and similar projects.  No pictures of any, since I can't imagine anybody impressed by a series of monochromatic creams in repurposed jars.

[^1]:  OK, technically, most of the actual work happened in the same space where I do most of my work, since I only needed actual kitchen appliances for a few minutes.  We can call it kitchen-adjacent, I guess, since I usually only stand a few feet from that doorway.

First, with summer hitting us fairly hard, my breakfasts often look like crackers and peanut butter[^2] or something similar.  As I got ready to eat, though, I noticed that I had run out of peanut butter.  A smarter person might have walked few blocks to the nearest grocery store and bought a jar of peanut butter, but I decided to see what I had sitting around.  In the fridge, I found a bag of peanut pieces labeled "peanut butter stock," and that almost surely would've worked, but I've done that before.

[^2]:  Yes, I know that those of you living outside the United States find peanut butter abhorrent.  Please accept my apologies if I traumatized you with the image.

### Pumpkin Seed Butter

More interesting?  I had some older bags of pumpkin seeds.  That, I hadn't done before.  Often, if I don't snack on pumpkin seeds directly, I chop them up to sprinkle over anything that I might make with sweet potatoes[^6], which usually comes out well.  I filled an old sixteen-ounce peanut butter jar with seeds and dumped them into my blender.

[^6]:  For example, for autumn-into-winter occasions, I'll often attack a raw sweet potato with a vegetable peeler, creating a pile of short ribbons.  Cook them in a skillet until they soften, and that becomes a weird-looking side-dish.  Depending on the company, tossing that with a few drops of something like maple syrup and some crushed/chopped/pulverized pumpkin seeds, and it falls into the "looks absurdly fancy" category.

And...oh, no.  The blender pulverized the seeds nicely, but flung them against the wall of the blender's container, where they stuck, leaving the blade whizzing around in open air.  Scrape the walls down to try again, and that produces slightly more of a paste, but immediately repeats the process.  After some trial and error, I alternated scraping down the seed pulp, adding oil, and pulsing the blender, until it started to run smooth.  Then, I let the blender run on low for about fifteen minutes, giving me a bright green paste that tasted great on the crackers---about half the jar that I used to measure the seeds a couple of paragraphs back---and I think that I have another use for it coming up.

### Oat/Granola Butter

Flush with that success, I decided that I wanted oat butter.  I've bought a small jar (usually called something like "granola butter," commercially) a few times before on sale and liked it, but even on sale, it feels silly to buy when I almost always have rolled oats around for other cooking.  As a result, I threw two cups of rolled oats in a skillet---summer, remember, so using the oven will make me extremely unhappy...---with a couple of tablespoons of oil to toast them, stirring regularly.  Once they started developing some color, the still-hot oats went right into my food processor, and let that run for a couple of minutes.  Probably, some combination of the heat, existing oil, and different tool made them easier to work with than the seeds, because that almost immediately became nearly creamy, and stayed in the way of the blades to continue processing.

It didn't quite get to where I wanted it, though, and needed some flavor, so I added a couple of spoonfuls of puréed coconut pulp ("coconut manna"), about a teaspoon of sweetener (some old agave syrup), and about a teaspoon of cinnamon.  It still needed a couple more teaspoons of oil to come together, but I got almost exactly what I wanted, I think, about three quarters of another of the old jars.

And it seems fairly likely, given how quickly the oat butter came together, that I probably should've also tried toasting the pumpkin seeds.  I'll give it a shot, next time around, because I still have plenty of seeds.

Oh, and I should probably mention that oat butter feels like a victim of AI slop.  I needed to improvise my recipe, because garbage recipes (that I'd bet nobody tested) dominate the search results.  These range from taking "granola" too seriously and blending oats with nuts, dried fruit, sugars, and so forth---to the point where you probably wouldn't remember the oats---to recipes that mostly suggest whizzing together oats with coconut oil, which...I've tried something like it before, and it tastes fine, but the coconut oil gives it two phases, oat flour suspended in oil at warm temperatures and a solid brick at cold temperatures.

### How an Elephant Fit into My Pajamas

And the Case of the Missing Peanut Butter?  I forgot that, a few days before, I had something of a craving for a recipe that I learned in...I want to say junior high school, so here, have a third hand-wavy recipe:  Mix peanut butter (about a cup), honey (about a quarter of a cup, maybe less), powdered milk (a third of a cup), and wheat germ (a few tablespoons).  That recipe intended to roll the moist ingredients into balls and coat them in wheat germ, but that always seemed excessively child-oriented, so whenever I've done it, I mixed everything together directly, often adding chopped dried fruit, seeds, and whatever else that I might want to use up.

In this case, I have a spread with chia seeds, old dried cranberries, and some oat bran, to go with the pumpkin seed butter and oat butter.  To alternate between them, I mean, not to literally eat them together.  That sounds mediocre at best.

Now, if I only had a means of baking bread this time of year...

### Miscellaneous

Given the season, I also ended up with more zucchini and corn than I expected.  As such, since I almost always have plenty of dried beans on hand, more than a few recent dinners went the [three sisters](https://en.wikipedia.org/wiki/Three_Sisters_%28agriculture%29) route.  It all tasted great, though I couldn't identify any more of a "recipe" than thing-that-I-wanted-to-eat...and the three sisters.  I do recommend exactly that, though, when you can get the ingredients at their peaks.

And yes, the term technically more often refers to an agricultural technique---a technique, I should mention, that Western science largely ignored until Soviet researchers proved the value of it to us in the 1970s---where colocating the three plant types allows them to grow symbiotically, instead of depleting the soil and competing for resources.  In short, the beans climb the corn stalks while fixing nitrogen to the soil, while the squash leaves protect the soil from heat, competing weeds, and (depending on the squash) pests.  However, the saying goes that "what grows together, goes together," and so I originally learned the term in the context of seasonal meal preparation.

## Ham Newsletter

{% github jcolag/ham-newsletter %}

Since I seem to have moved onto my local installation of [Fresh RSS](https://freshrss.org/) permanently, it seemed like a good time to get a script ready to pull down my saved articles in advance of August's [newsletter](https://buymeacoffee.com/jcolag).  Fresh RSS supports an API inspired by [Google Reader](https://en.wikipedia.org/wiki/Google_Reader), which looked close enough to the Nextcloud script that I wrote (and then mostly abandoned) that I used it as a basis.

Google Reader never released official API documentation, though, so I needed to feel my way through examples, leading to a couple of iterations on getting the continuation logic to work.  But it should now work, grabbing all saved articles until the start of the needed date-range, then extracting only the relevant articles and creating a Markdown list of links to the originals.

## Notoboto

{% github jcolag/Notoboto %}

Since the CSON code that I extracted into a library seems to work fine over there, I finally removed the original version from the main program.

The color code, primarily for creating new categories of notes, now should work a bit better.  Probably from copying and pasting, the hue only ranged from 0--255, instead of 0--360.  And because it didn't expect colors to come from outside that narrow random generator to convert to RGB, it never checked the boundaries.  Fixing the range and adding a modulus operator (`%`) to guarantee that any inputs stay in range should now keep it all on track.

## Entropy Arbitrage

{% github jcolag/entropy-arbitrage-code %}

You'll probably think of the bigger headline, here, that the plugin to create stenography keyboard images has a companion test script.  If you want to see what it does, or if you need a vector image of a stenography keyboard with whatever keys pressed, that should drive the plugin to give you what you want.

In addition, the repository now includes two prototype scripts that I have talked about in the past.  Most likely to see service soon, `_scripts/simple-icons.sh` grabs the latest version of the font version of [Simple Icons](https://simpleicons.org/), unpacks it, and generates the CSS required for the link and code annotations.  The other scrapes Firefox's browser local storage to grab everything that [Typey Type](https://didoesdigital.com/typey-type/) stores, which shouldn't take too much effort to adapt to other websites.

## Next

I never had time to start migrating away from GitHub, during the week, so I may try to prioritize that.  Changes will probably continue to propagate through to GitHub---people do find the metrics there as indicators of activity, and I have never seen the site as anything more than a distribution channel that doesn't charge money---so I may put some work there.

Oh, and now that I have looked at **Notoboto**'s color code for the first time in a couple of years, I wonder if random colors make sense at all, and if I can't find some algorithm to take a list of colors as input and find the *most contrasting* color to everything in the set, to extend the time until a user says "I can't tell the difference between these two items."

* * *

**Credits**:  The header image is [Hartjesdag](https://commons.wikimedia.org/wiki/File:Hartjesdag.jpg) by Johan Braakensiek, long in the public domain due to copyright expiration.
